var U=Object.defineProperty,z=Object.defineProperties;var E=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var G=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var N=(v,l,o)=>l in v?U(v,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):v[l]=o,B=(v,l)=>{for(var o in l||(l={}))G.call(l,o)&&N(v,o,l[o]);if(S)for(var o of S(l))O.call(l,o)&&N(v,o,l[o]);return v},A=(v,l)=>z(v,E(l));var D=(v,l,o)=>new Promise((_,y)=>{var r=m=>{try{i(o.next(m))}catch(h){y(h)}},k=m=>{try{i(o.throw(m))}catch(h){y(h)}},i=m=>m.done?_(m.value):Promise.resolve(m.value).then(r,k);i((o=o.apply(v,l)).next())});import{r as w,A as J,a as H,c as K,b as f,d as t,h as C,w as c,u as s,g as F,e as n,F as P,f as $,i as p,t as g,o as u,B as b,_ as x,y as Y,D as q}from"./index.js";import{B as Q}from"./Badge.js";import{I as V}from"./Input.js";const W={class:"flex flex-col h-full"},X={class:"flex flex-1 overflow-hidden bg-gray-50"},Z={class:"w-80 bg-white border-r border-gray-200 flex flex-col overflow-y-auto p-6"},ee={class:"flex items-center justify-between mb-6"},te={class:"space-y-6"},se={class:"pt-4"},le={class:"flex-1 overflow-y-auto p-8 relative"},ae={key:0,class:"h-full flex flex-col items-center justify-center text-center opacity-60"},oe={class:"bg-white p-4 rounded-full shadow-sm mb-4"},ie={key:1,class:"space-y-4"},ne={key:2,class:"flex flex-col h-full"},re={class:"flex justify-between items-center mb-4"},de={class:"font-bold text-gray-800"},ue={class:"ml-2 px-2 py-0.5 bg-gray-200 text-gray-600 rounded-full text-xs"},ce={class:"flex items-center gap-2"},ve={class:"text-sm text-gray-500"},ge={class:"space-y-4 pb-20"},fe=["onClick"],me={class:"flex justify-between items-start"},pe={class:"flex gap-4"},xe={class:"h-12 w-12 rounded-full bg-[#4318FF]/10 flex items-center justify-center text-[#4318FF] font-bold text-lg"},ye={class:"flex items-center gap-2"},be={class:"font-bold text-gray-900 text-lg group-hover:text-[#4318FF] transition-colors"},he={class:"text-gray-600 font-medium mt-0.5"},_e={class:"flex items-center gap-4 mt-3 text-sm text-gray-500"},we={key:0,class:"flex items-center gap-1.5"},Fe={key:1,class:"flex items-center gap-1.5"},ke={key:0,class:"mt-4"},Ce={class:"flex items-center gap-4 mb-6"},je={class:"h-16 w-16 rounded-full bg-[#4318FF]/10 flex items-center justify-center text-[#4318FF] text-2xl font-bold"},Ve={class:"text-2xl font-bold text-gray-900"},Le={class:"text-lg text-gray-600"},Se={class:"grid grid-cols-2 gap-6 bg-gray-50 p-6 rounded-lg border border-gray-100"},Ne={class:"text-gray-900 font-medium mt-1"},Be={class:"text-gray-900 font-medium mt-1"},Ae={class:"mt-6 p-4 bg-[#4318FF]/5 border border-[#4318FF]/10 rounded text-sm text-[#4318FF] flex items-start gap-2"},Me={__name:"LeadGenerator",setup(v){const l=w({job_title:"",location:"",industry:""}),o=w(1),_=w(null),y=w(!1),r=w(null);J(()=>{document.title="Lead Generator"});const k=H(()=>l.value.job_title||l.value.location||l.value.industry),i=K({url:"ai_calling_agent.api.search_apollo_leads",makeParams(d){return{job_title:l.value.job_title,location:l.value.location,industry:l.value.industry,page:o.value,per_page:10}},onSuccess(d){return d.map(e=>A(B({},e),{is_saved:!1}))}});function m(){!k.value||(o.value=1,i.fetch())}function h(d){o.value+=d,i.fetch()}function I(){l.value={job_title:"",location:"",industry:""},o.value=1,i.reset()}function M(d){r.value=d,y.value=!0}function L(d){return d?d.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"?"}function R(d){return D(this,null,function*(){_.value=d.id;try{const e=yield fetch("/api/method/ai_calling_agent.api.save_apollo_lead",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apollo_id:d.id})}),a=yield e.json();e.ok?(d.is_saved=!0,r.value&&r.value.id===d.id&&(r.value.is_saved=!0)):alert(a.message||"Failed to save lead")}catch(e){console.error(e),alert("An error occurred")}finally{_.value=null}})}return(d,e)=>(u(),f("div",W,[e[23]||(e[23]=t("div",{class:"px-8 py-6 border-b border-gray-100 bg-white"},[t("h1",{class:"text-2xl font-bold text-gray-900"},"Lead Generator"),t("p",{class:"text-sm text-gray-500 mt-1"}," Search millions of verified B2B contacts using Apollo.io integration. ")],-1)),t("div",X,[t("div",Z,[t("div",ee,[e[9]||(e[9]=t("h2",{class:"font-semibold text-gray-900"},"Filters",-1)),k.value?(u(),C(s(b),{key:0,variant:"ghost",class:"text-xs text-[#4318FF] hover:text-[#3311CC]",onClick:I},{default:c(()=>[...e[8]||(e[8]=[p(" Clear All ",-1)])]),_:1})):F("",!0)]),t("div",te,[n(s(V),{label:"Job Title",modelValue:l.value.job_title,"onUpdate:modelValue":e[0]||(e[0]=a=>l.value.job_title=a),type:"text",placeholder:"e.g. CEO, Marketing Manager",disabled:s(i).loading},null,8,["modelValue","disabled"]),n(s(V),{label:"Location",modelValue:l.value.location,"onUpdate:modelValue":e[1]||(e[1]=a=>l.value.location=a),type:"text",placeholder:"e.g. Mumbai, New York",disabled:s(i).loading},null,8,["modelValue","disabled"]),n(s(V),{label:"Industry / Keywords",modelValue:l.value.industry,"onUpdate:modelValue":e[2]||(e[2]=a=>l.value.industry=a),type:"text",placeholder:"e.g. Software, Healthcare",disabled:s(i).loading},null,8,["modelValue","disabled"]),t("div",se,[n(s(b),{variant:"solid",class:"w-full justify-center py-2 !bg-[#4318FF] hover:!bg-[#3311CC] !text-white border-transparent transition-colors",size:"lg",loading:s(i).loading,onClick:m},{prefix:c(()=>[n(s(x),{name:"search",class:"h-4 w-4"})]),default:c(()=>[e[10]||(e[10]=p(" Find Leads ",-1))]),_:1},8,["loading"])])])]),t("div",le,[!s(i).data&&!s(i).loading?(u(),f("div",ae,[t("div",oe,[n(s(x),{name:"users",class:"h-8 w-8 text-gray-400"})]),e[11]||(e[11]=t("h3",{class:"text-lg font-medium text-gray-900"},"No leads to show",-1)),e[12]||(e[12]=t("p",{class:"text-gray-500 max-w-sm mt-2"}," Enter your target criteria in the filters panel to start searching. ",-1))])):s(i).loading?(u(),f("div",ie,[(u(),f(P,null,$(3,a=>t("div",{key:a,class:"bg-white p-6 rounded-lg border border-gray-100 shadow-sm animate-pulse"},[...e[13]||(e[13]=[Y('<div class="flex items-center gap-4"><div class="h-12 w-12 bg-gray-200 rounded-full"></div><div class="space-y-2 flex-1"><div class="h-4 bg-gray-200 rounded w-1/4"></div><div class="h-3 bg-gray-200 rounded w-1/3"></div></div></div>',1)])])),64))])):(u(),f("div",ne,[t("div",re,[t("h3",de,[e[14]||(e[14]=p(" Search Results ",-1)),t("span",ue," Page "+g(o.value),1)]),t("div",ce,[n(s(b),{variant:"outline",size:"sm",disabled:o.value===1||s(i).loading,onClick:e[3]||(e[3]=a=>h(-1))},{default:c(()=>[n(s(x),{name:"chevron-left",class:"h-4 w-4"})]),_:1},8,["disabled"]),t("span",ve,"Page "+g(o.value),1),n(s(b),{variant:"outline",size:"sm",disabled:!s(i).data||s(i).data.length<10||s(i).loading,onClick:e[4]||(e[4]=a=>h(1))},{default:c(()=>[n(s(x),{name:"chevron-right",class:"h-4 w-4"})]),_:1},8,["disabled"])])]),t("div",ge,[(u(!0),f(P,null,$(s(i).data,a=>(u(),f("div",{key:a.id,onClick:j=>M(a),class:"group bg-white p-5 rounded-xl border border-gray-200 shadow-sm hover:shadow-md hover:border-[#4318FF]/30 transition-all duration-200 cursor-pointer"},[t("div",me,[t("div",pe,[t("div",xe,g(L(a.name)),1),t("div",null,[t("div",ye,[t("h4",be,g(a.name),1),a.is_saved?(u(),C(s(Q),{key:0,theme:"green",variant:"subtle"},{default:c(()=>[...e[15]||(e[15]=[p("Saved",-1)])]),_:1})):F("",!0)]),t("div",he,g(a.title||"No Title"),1),t("div",_e,[a.company?(u(),f("div",we,[n(s(x),{name:"briefcase",class:"h-3.5 w-3.5"}),p(" "+g(a.company),1)])):F("",!0),a.location?(u(),f("div",Fe,[n(s(x),{name:"map-pin",class:"h-3.5 w-3.5"}),p(" "+g(a.location),1)])):F("",!0)])])]),n(s(x),{name:"chevron-right",class:"text-gray-300 group-hover:text-[#4318FF] h-5 w-5 mt-4"})])],8,fe))),128))])]))])]),n(s(q),{modelValue:y.value,"onUpdate:modelValue":e[7]||(e[7]=a=>y.value=a),options:{size:"xl"}},{"body-title":c(()=>[...e[16]||(e[16]=[t("h3",{class:"text-xl font-bold"},"Lead Details",-1)])]),"body-content":c(()=>[r.value?(u(),f("div",ke,[t("div",Ce,[t("div",je,g(L(r.value.name)),1),t("div",null,[t("h2",Ve,g(r.value.name),1),t("p",Le,g(r.value.title),1)])]),t("div",Se,[t("div",null,[e[17]||(e[17]=t("label",{class:"text-xs font-bold text-gray-500 uppercase"},"Company",-1)),t("div",Ne,g(r.value.company||"N/A"),1)]),t("div",null,[e[18]||(e[18]=t("label",{class:"text-xs font-bold text-gray-500 uppercase"},"Location",-1)),t("div",Be,g(r.value.location||"N/A"),1)])]),t("div",Ae,[n(s(x),{name:"info",class:"h-4 w-4 mt-0.5 flex-shrink-0"}),e[19]||(e[19]=t("span",null,'Clicking "Reveal & Save" will use 1 credit to fetch verified contact info and add this person to your CRM.',-1))])])):F("",!0)]),actions:c(()=>{var a,j;return[n(s(b),{variant:"subtle",onClick:e[5]||(e[5]=T=>y.value=!1)},{default:c(()=>[...e[20]||(e[20]=[p("Close",-1)])]),_:1}),(a=r.value)!=null&&a.is_saved?(u(),C(s(b),{key:1,variant:"outline",theme:"green",disabled:""},{prefix:c(()=>[n(s(x),{name:"check",class:"h-4 w-4"})]),default:c(()=>[e[22]||(e[22]=p(" Already Saved ",-1))]),_:1})):(u(),C(s(b),{key:0,variant:"solid",class:"!bg-[#4318FF] hover:!bg-[#3311CC] !text-white border-transparent",loading:_.value===((j=r.value)==null?void 0:j.id),onClick:e[6]||(e[6]=T=>R(r.value))},{default:c(()=>[...e[21]||(e[21]=[p(" Reveal & Save ",-1)])]),_:1},8,["loading"]))]}),_:1},8,["modelValue"])]))}};export{Me as default};
